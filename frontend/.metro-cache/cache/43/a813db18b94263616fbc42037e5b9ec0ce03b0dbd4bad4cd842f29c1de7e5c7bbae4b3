{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":57,"index":136}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.AuthProvider = AuthProvider;\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _utilsApi = require(_dependencyMap[1], \"../utils/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    organization: null,\n    outlets: [],\n    isLoading: true,\n    login: async () => {},\n    logout: async () => {},\n    refresh: async () => {}\n  });\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [organization, setOrganization] = (0, _react.useState)(null);\n    const [outlets, setOutlets] = (0, _react.useState)([]);\n    const [isLoading, setIsLoading] = (0, _react.useState)(false);\n    const login = async (email, password) => {\n      const res = await _utilsApi.api.login(email, password);\n      await (0, _utilsApi.setToken)(res.token);\n      setUser(res.user);\n      // Fetch full profile\n      try {\n        const me = await _utilsApi.api.getMe();\n        setOrganization(me.organization);\n        setOutlets(me.outlets || []);\n      } catch {}\n    };\n    const logout = async () => {\n      await (0, _utilsApi.clearToken)();\n      setUser(null);\n      setOrganization(null);\n      setOutlets([]);\n    };\n    const refresh = async () => {\n      try {\n        const me = await _utilsApi.api.getMe();\n        setUser(me.user);\n        setOrganization(me.organization);\n        setOutlets(me.outlets || []);\n      } catch {\n        await logout();\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        organization,\n        outlets,\n        isLoading,\n        login,\n        logout,\n        refresh\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"4odtGLtJhM7zxjCpW7vS8+ddgzk=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    return (0, _react.useContext)(AuthContext);\n  };\n  _s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":90,"map":[[10,2,33,0,"exports"],[10,9,33,0],[10,10,33,0,"AuthProvider"],[10,22,33,0],[10,25,33,0,"AuthProvider"],[10,37,33,0],[11,2,76,0,"Object"],[11,8,76,0],[11,9,76,0,"defineProperty"],[11,23,76,0],[11,24,76,0,"exports"],[11,31,76,0],[12,4,76,0,"enumerable"],[12,14,76,0],[13,4,76,0,"get"],[13,7,76,0],[13,18,76,0,"get"],[13,19,76,0],[14,6,76,0],[14,13,76,0,"useAuth"],[14,20,76,0],[15,4,76,0],[16,2,76,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_utilsApi"],[18,15,2,0],[18,18,2,0,"require"],[18,25,2,0],[18,26,2,0,"_dependencyMap"],[18,40,2,0],[19,2,2,57],[19,6,2,57,"_reactJsxDevRuntime"],[19,25,2,57],[19,28,2,57,"require"],[19,35,2,57],[19,36,2,57,"_dependencyMap"],[19,50,2,57],[20,2,23,0],[20,8,23,6,"AuthContext"],[20,19,23,17],[20,35,23,20],[20,39,23,20,"createContext"],[20,45,23,33],[20,46,23,33,"createContext"],[20,59,23,33],[20,61,23,45],[21,4,24,2,"user"],[21,8,24,6],[21,10,24,8],[21,14,24,12],[22,4,25,2,"organization"],[22,16,25,14],[22,18,25,16],[22,22,25,20],[23,4,26,2,"outlets"],[23,11,26,9],[23,13,26,11],[23,15,26,13],[24,4,27,2,"isLoading"],[24,13,27,11],[24,15,27,13],[24,19,27,17],[25,4,28,2,"login"],[25,9,28,7],[25,11,28,9],[25,17,28,9,"login"],[25,18,28,9],[25,23,28,21],[25,24,28,22],[25,25,28,23],[26,4,29,2,"logout"],[26,10,29,8],[26,12,29,10],[26,18,29,10,"logout"],[26,19,29,10],[26,24,29,22],[26,25,29,23],[26,26,29,24],[27,4,30,2,"refresh"],[27,11,30,9],[27,13,30,11],[27,19,30,11,"refresh"],[27,20,30,11],[27,25,30,23],[27,26,30,24],[28,2,31,0],[28,3,31,1],[28,4,31,2],[29,2,33,7],[29,11,33,16,"AuthProvider"],[29,23,33,28,"AuthProvider"],[29,24,33,29],[30,4,33,31,"children"],[31,2,33,71],[31,3,33,72],[31,5,33,74],[32,4,33,74,"_s"],[32,6,33,74],[33,4,34,2],[33,10,34,8],[33,11,34,9,"user"],[33,15,34,13],[33,17,34,15,"setUser"],[33,24,34,22],[33,25,34,23],[33,28,34,26],[33,32,34,26,"useState"],[33,38,34,34],[33,39,34,34,"useState"],[33,47,34,34],[33,49,34,48],[33,53,34,52],[33,54,34,53],[34,4,35,2],[34,10,35,8],[34,11,35,9,"organization"],[34,23,35,21],[34,25,35,23,"setOrganization"],[34,40,35,38],[34,41,35,39],[34,44,35,42],[34,48,35,42,"useState"],[34,54,35,50],[34,55,35,50,"useState"],[34,63,35,50],[34,65,35,56],[34,69,35,60],[34,70,35,61],[35,4,36,2],[35,10,36,8],[35,11,36,9,"outlets"],[35,18,36,16],[35,20,36,18,"setOutlets"],[35,30,36,28],[35,31,36,29],[35,34,36,32],[35,38,36,32,"useState"],[35,44,36,40],[35,45,36,40,"useState"],[35,53,36,40],[35,55,36,48],[35,57,36,50],[35,58,36,51],[36,4,37,2],[36,10,37,8],[36,11,37,9,"isLoading"],[36,20,37,18],[36,22,37,20,"setIsLoading"],[36,34,37,32],[36,35,37,33],[36,38,37,36],[36,42,37,36,"useState"],[36,48,37,44],[36,49,37,44,"useState"],[36,57,37,44],[36,59,37,45],[36,64,37,50],[36,65,37,51],[37,4,39,2],[37,10,39,8,"login"],[37,15,39,13],[37,18,39,16],[37,24,39,16,"login"],[37,25,39,23,"email"],[37,30,39,36],[37,32,39,38,"password"],[37,40,39,54],[37,45,39,59],[38,6,40,4],[38,12,40,10,"res"],[38,15,40,13],[38,18,40,16],[38,24,40,22,"api"],[38,33,40,25],[38,34,40,25,"api"],[38,37,40,25],[38,38,40,26,"login"],[38,43,40,31],[38,44,40,32,"email"],[38,49,40,37],[38,51,40,39,"password"],[38,59,40,47],[38,60,40,48],[39,6,41,4],[39,12,41,10],[39,16,41,10,"setToken"],[39,25,41,18],[39,26,41,18,"setToken"],[39,34,41,18],[39,36,41,19,"res"],[39,39,41,22],[39,40,41,23,"token"],[39,45,41,28],[39,46,41,29],[40,6,42,4,"setUser"],[40,13,42,11],[40,14,42,12,"res"],[40,17,42,15],[40,18,42,16,"user"],[40,22,42,20],[40,23,42,21],[41,6,43,4],[42,6,44,4],[42,10,44,8],[43,8,45,6],[43,14,45,12,"me"],[43,16,45,14],[43,19,45,17],[43,25,45,23,"api"],[43,34,45,26],[43,35,45,26,"api"],[43,38,45,26],[43,39,45,27,"getMe"],[43,44,45,32],[43,45,45,33],[43,46,45,34],[44,8,46,6,"setOrganization"],[44,23,46,21],[44,24,46,22,"me"],[44,26,46,24],[44,27,46,25,"organization"],[44,39,46,37],[44,40,46,38],[45,8,47,6,"setOutlets"],[45,18,47,16],[45,19,47,17,"me"],[45,21,47,19],[45,22,47,20,"outlets"],[45,29,47,27],[45,33,47,31],[45,35,47,33],[45,36,47,34],[46,6,48,4],[46,7,48,5],[46,8,48,6],[46,14,48,12],[46,15,48,13],[47,4,49,2],[47,5,49,3],[48,4,51,2],[48,10,51,8,"logout"],[48,16,51,14],[48,19,51,17],[48,25,51,17,"logout"],[48,26,51,17],[48,31,51,29],[49,6,52,4],[49,12,52,10],[49,16,52,10,"clearToken"],[49,25,52,20],[49,26,52,20,"clearToken"],[49,36,52,20],[49,38,52,21],[49,39,52,22],[50,6,53,4,"setUser"],[50,13,53,11],[50,14,53,12],[50,18,53,16],[50,19,53,17],[51,6,54,4,"setOrganization"],[51,21,54,19],[51,22,54,20],[51,26,54,24],[51,27,54,25],[52,6,55,4,"setOutlets"],[52,16,55,14],[52,17,55,15],[52,19,55,17],[52,20,55,18],[53,4,56,2],[53,5,56,3],[54,4,58,2],[54,10,58,8,"refresh"],[54,17,58,15],[54,20,58,18],[54,26,58,18,"refresh"],[54,27,58,18],[54,32,58,30],[55,6,59,4],[55,10,59,8],[56,8,60,6],[56,14,60,12,"me"],[56,16,60,14],[56,19,60,17],[56,25,60,23,"api"],[56,34,60,26],[56,35,60,26,"api"],[56,38,60,26],[56,39,60,27,"getMe"],[56,44,60,32],[56,45,60,33],[56,46,60,34],[57,8,61,6,"setUser"],[57,15,61,13],[57,16,61,14,"me"],[57,18,61,16],[57,19,61,17,"user"],[57,23,61,21],[57,24,61,22],[58,8,62,6,"setOrganization"],[58,23,62,21],[58,24,62,22,"me"],[58,26,62,24],[58,27,62,25,"organization"],[58,39,62,37],[58,40,62,38],[59,8,63,6,"setOutlets"],[59,18,63,16],[59,19,63,17,"me"],[59,21,63,19],[59,22,63,20,"outlets"],[59,29,63,27],[59,33,63,31],[59,35,63,33],[59,36,63,34],[60,6,64,4],[60,7,64,5],[60,8,64,6],[60,14,64,12],[61,8,65,6],[61,14,65,12,"logout"],[61,20,65,18],[61,21,65,19],[61,22,65,20],[62,6,66,4],[63,4,67,2],[63,5,67,3],[64,4,69,2],[64,24,70,4],[64,28,70,4,"_reactJsxDevRuntime"],[64,47,70,4],[64,48,70,4,"jsxDEV"],[64,54,70,4],[64,56,70,5,"AuthContext"],[64,67,70,16],[64,68,70,17,"Provider"],[64,76,70,25],[65,6,70,26,"value"],[65,11,70,31],[65,13,70,33],[66,8,70,35,"user"],[66,12,70,39],[67,8,70,41,"organization"],[67,20,70,53],[68,8,70,55,"outlets"],[68,15,70,62],[69,8,70,64,"isLoading"],[69,17,70,73],[70,8,70,75,"login"],[70,13,70,80],[71,8,70,82,"logout"],[71,14,70,88],[72,8,70,90,"refresh"],[73,6,70,98],[73,7,70,100],[74,6,70,100,"children"],[74,14,70,100],[74,16,71,7,"children"],[75,4,71,15],[76,6,71,15,"fileName"],[76,14,71,15],[76,16,71,15,"_jsxFileName"],[76,28,71,15],[77,6,71,15,"lineNumber"],[77,16,71,15],[78,6,71,15,"columnNumber"],[78,18,71,15],[79,4,71,15],[79,11,72,26],[79,12,72,27],[80,2,74,0],[81,2,74,1,"_s"],[81,4,74,1],[81,5,33,16,"AuthProvider"],[81,17,33,28],[82,2,33,28,"_c"],[82,4,33,28],[82,7,33,16,"AuthProvider"],[82,19,33,28],[83,2,76,7],[83,8,76,13,"useAuth"],[83,15,76,20],[83,18,76,23,"useAuth"],[83,19,76,23],[84,4,76,23,"_s2"],[84,7,76,23],[85,4,76,23],[85,11,76,29],[85,15,76,29,"useContext"],[85,21,76,39],[85,22,76,39,"useContext"],[85,32,76,39],[85,34,76,40,"AuthContext"],[85,45,76,51],[85,46,76,52],[86,2,76,52],[87,2,76,53,"_s2"],[87,5,76,53],[87,6,76,13,"useAuth"],[87,13,76,20],[88,2,76,20],[88,6,76,20,"_c"],[88,8,76,20],[89,2,76,20,"$RefreshReg$"],[89,14,76,20],[89,15,76,20,"_c"],[89,17,76,20],[90,0,76,20],[90,3]],"functionMap":{"names":["<global>","createContext$argument_0.login","createContext$argument_0.logout","createContext$argument_0.refresh","AuthProvider","login","logout","refresh","useAuth"],"mappings":"AAA;SC2B,cD;UEC,cF;WGC,cH;OIG;gBCM;GDU;iBEE;GFK;kBGE;GHS;CJO;uBQE,6BR"},"hasCjsExports":false},"type":"js/module"}]}