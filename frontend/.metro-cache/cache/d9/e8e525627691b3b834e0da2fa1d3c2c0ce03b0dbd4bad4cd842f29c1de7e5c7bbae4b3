{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":57,"index":136}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _utilsApi = require(_dependencyMap[3], \"../utils/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  var AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    organization: null,\n    outlets: [],\n    isLoading: true,\n    login: function () {\n      var _ref = (0, _asyncToGenerator.default)(function* () {});\n      return function login() {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    logout: function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* () {});\n      return function logout() {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    refresh: function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* () {});\n      return function refresh() {\n        return _ref3.apply(this, arguments);\n      };\n    }()\n  });\n  function AuthProvider(_ref4) {\n    _s();\n    var children = _ref4.children;\n    var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n    var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      organization = _useState4[0],\n      setOrganization = _useState4[1];\n    var _useState5 = (0, _react.useState)([]),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      outlets = _useState6[0],\n      setOutlets = _useState6[1];\n    var _useState7 = (0, _react.useState)(false),\n      _useState8 = (0, _slicedToArray.default)(_useState7, 2),\n      isLoading = _useState8[0],\n      setIsLoading = _useState8[1];\n    var login = /*#__PURE__*/function () {\n      var _ref5 = (0, _asyncToGenerator.default)(function* (email, password) {\n        var res = yield _utilsApi.api.login(email, password);\n        yield (0, _utilsApi.setToken)(res.token);\n        setUser(res.user);\n        // Fetch full profile\n        try {\n          var me = yield _utilsApi.api.getMe();\n          setOrganization(me.organization);\n          setOutlets(me.outlets || []);\n        } catch {}\n      });\n      return function login(_x, _x2) {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n    var logout = /*#__PURE__*/function () {\n      var _ref6 = (0, _asyncToGenerator.default)(function* () {\n        yield (0, _utilsApi.clearToken)();\n        setUser(null);\n        setOrganization(null);\n        setOutlets([]);\n      });\n      return function logout() {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n    var refresh = /*#__PURE__*/function () {\n      var _ref7 = (0, _asyncToGenerator.default)(function* () {\n        try {\n          var me = yield _utilsApi.api.getMe();\n          setUser(me.user);\n          setOrganization(me.organization);\n          setOutlets(me.outlets || []);\n        } catch {\n          yield logout();\n        }\n      });\n      return function refresh() {\n        return _ref7.apply(this, arguments);\n      };\n    }();\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        organization,\n        outlets,\n        isLoading,\n        login,\n        logout,\n        refresh\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"4odtGLtJhM7zxjCpW7vS8+ddgzk=\");\n  _c = AuthProvider;\n  var useAuth = () => {\n    _s2();\n    return (0, _react.useContext)(AuthContext);\n  };\n  _s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":140,"map":[[15,2,33,0,"exports"],[15,9,33,0],[15,10,33,0,"AuthProvider"],[15,22,33,0],[15,25,33,0,"AuthProvider"],[15,37,33,0],[16,2,76,0,"Object"],[16,8,76,0],[16,9,76,0,"defineProperty"],[16,23,76,0],[16,24,76,0,"exports"],[16,31,76,0],[17,4,76,0,"enumerable"],[17,14,76,0],[18,4,76,0,"get"],[18,7,76,0],[18,18,76,0,"get"],[18,19,76,0],[19,6,76,0],[19,13,76,0,"useAuth"],[19,20,76,0],[20,4,76,0],[21,2,76,0],[22,2,76,53],[22,6,76,53,"_babelRuntimeHelpersSlicedToArray"],[22,39,76,53],[22,42,76,53,"require"],[22,49,76,53],[22,50,76,53,"_dependencyMap"],[22,64,76,53],[23,2,76,53],[23,6,76,53,"_slicedToArray"],[23,20,76,53],[23,23,76,53,"_interopDefault"],[23,38,76,53],[23,39,76,53,"_babelRuntimeHelpersSlicedToArray"],[23,72,76,53],[24,2,76,53],[24,6,76,53,"_babelRuntimeHelpersAsyncToGenerator"],[24,42,76,53],[24,45,76,53,"require"],[24,52,76,53],[24,53,76,53,"_dependencyMap"],[24,67,76,53],[25,2,76,53],[25,6,76,53,"_asyncToGenerator"],[25,23,76,53],[25,26,76,53,"_interopDefault"],[25,41,76,53],[25,42,76,53,"_babelRuntimeHelpersAsyncToGenerator"],[25,78,76,53],[26,2,1,0],[26,6,1,0,"_react"],[26,12,1,0],[26,15,1,0,"require"],[26,22,1,0],[26,23,1,0,"_dependencyMap"],[26,37,1,0],[27,2,2,0],[27,6,2,0,"_utilsApi"],[27,15,2,0],[27,18,2,0,"require"],[27,25,2,0],[27,26,2,0,"_dependencyMap"],[27,40,2,0],[28,2,2,57],[28,6,2,57,"_reactJsxDevRuntime"],[28,25,2,57],[28,28,2,57,"require"],[28,35,2,57],[28,36,2,57,"_dependencyMap"],[28,50,2,57],[29,2,23,0],[29,6,23,6,"AuthContext"],[29,17,23,17],[29,33,23,20],[29,37,23,20,"createContext"],[29,43,23,33],[29,44,23,33,"createContext"],[29,57,23,33],[29,59,23,45],[30,4,24,2,"user"],[30,8,24,6],[30,10,24,8],[30,14,24,12],[31,4,25,2,"organization"],[31,16,25,14],[31,18,25,16],[31,22,25,20],[32,4,26,2,"outlets"],[32,11,26,9],[32,13,26,11],[32,15,26,13],[33,4,27,2,"isLoading"],[33,13,27,11],[33,15,27,13],[33,19,27,17],[34,4,28,2,"login"],[34,9,28,7],[35,6,28,7],[35,10,28,7,"_ref"],[35,14,28,7],[35,21,28,7,"_asyncToGenerator"],[35,38,28,7],[35,39,28,7,"default"],[35,46,28,7],[35,48,28,9],[35,61,28,21],[35,62,28,22],[35,63,28,23],[36,6,28,23],[36,22,28,2,"login"],[36,27,28,7,"login"],[36,28,28,7],[37,8,28,7],[37,15,28,7,"_ref"],[37,19,28,7],[37,20,28,7,"apply"],[37,25,28,7],[37,32,28,7,"arguments"],[37,41,28,7],[38,6,28,7],[39,4,28,7],[39,7,28,23],[40,4,29,2,"logout"],[40,10,29,8],[41,6,29,8],[41,10,29,8,"_ref2"],[41,15,29,8],[41,22,29,8,"_asyncToGenerator"],[41,39,29,8],[41,40,29,8,"default"],[41,47,29,8],[41,49,29,10],[41,62,29,22],[41,63,29,23],[41,64,29,24],[42,6,29,24],[42,22,29,2,"logout"],[42,28,29,8,"logout"],[42,29,29,8],[43,8,29,8],[43,15,29,8,"_ref2"],[43,20,29,8],[43,21,29,8,"apply"],[43,26,29,8],[43,33,29,8,"arguments"],[43,42,29,8],[44,6,29,8],[45,4,29,8],[45,7,29,24],[46,4,30,2,"refresh"],[46,11,30,9],[47,6,30,9],[47,10,30,9,"_ref3"],[47,15,30,9],[47,22,30,9,"_asyncToGenerator"],[47,39,30,9],[47,40,30,9,"default"],[47,47,30,9],[47,49,30,11],[47,62,30,23],[47,63,30,24],[47,64,30,25],[48,6,30,25],[48,22,30,2,"refresh"],[48,29,30,9,"refresh"],[48,30,30,9],[49,8,30,9],[49,15,30,9,"_ref3"],[49,20,30,9],[49,21,30,9,"apply"],[49,26,30,9],[49,33,30,9,"arguments"],[49,42,30,9],[50,6,30,9],[51,4,30,9],[52,2,31,0],[52,3,31,1],[52,4,31,2],[53,2,33,7],[53,11,33,16,"AuthProvider"],[53,23,33,28,"AuthProvider"],[53,24,33,28,"_ref4"],[53,29,33,28],[53,31,33,74],[54,4,33,74,"_s"],[54,6,33,74],[55,4,33,74],[55,8,33,31,"children"],[55,16,33,39],[55,19,33,39,"_ref4"],[55,24,33,39],[55,25,33,31,"children"],[55,33,33,39],[56,4,34,2],[56,8,34,2,"_useState"],[56,17,34,2],[56,20,34,26],[56,24,34,26,"useState"],[56,30,34,34],[56,31,34,34,"useState"],[56,39,34,34],[56,41,34,48],[56,45,34,52],[56,46,34,53],[57,6,34,53,"_useState2"],[57,16,34,53],[57,23,34,53,"_slicedToArray"],[57,37,34,53],[57,38,34,53,"default"],[57,45,34,53],[57,47,34,53,"_useState"],[57,56,34,53],[58,6,34,9,"user"],[58,10,34,13],[58,13,34,13,"_useState2"],[58,23,34,13],[59,6,34,15,"setUser"],[59,13,34,22],[59,16,34,22,"_useState2"],[59,26,34,22],[60,4,35,2],[60,8,35,2,"_useState3"],[60,18,35,2],[60,21,35,42],[60,25,35,42,"useState"],[60,31,35,50],[60,32,35,50,"useState"],[60,40,35,50],[60,42,35,56],[60,46,35,60],[60,47,35,61],[61,6,35,61,"_useState4"],[61,16,35,61],[61,23,35,61,"_slicedToArray"],[61,37,35,61],[61,38,35,61,"default"],[61,45,35,61],[61,47,35,61,"_useState3"],[61,57,35,61],[62,6,35,9,"organization"],[62,18,35,21],[62,21,35,21,"_useState4"],[62,31,35,21],[63,6,35,23,"setOrganization"],[63,21,35,38],[63,24,35,38,"_useState4"],[63,34,35,38],[64,4,36,2],[64,8,36,2,"_useState5"],[64,18,36,2],[64,21,36,32],[64,25,36,32,"useState"],[64,31,36,40],[64,32,36,40,"useState"],[64,40,36,40],[64,42,36,48],[64,44,36,50],[64,45,36,51],[65,6,36,51,"_useState6"],[65,16,36,51],[65,23,36,51,"_slicedToArray"],[65,37,36,51],[65,38,36,51,"default"],[65,45,36,51],[65,47,36,51,"_useState5"],[65,57,36,51],[66,6,36,9,"outlets"],[66,13,36,16],[66,16,36,16,"_useState6"],[66,26,36,16],[67,6,36,18,"setOutlets"],[67,16,36,28],[67,19,36,28,"_useState6"],[67,29,36,28],[68,4,37,2],[68,8,37,2,"_useState7"],[68,18,37,2],[68,21,37,36],[68,25,37,36,"useState"],[68,31,37,44],[68,32,37,44,"useState"],[68,40,37,44],[68,42,37,45],[68,47,37,50],[68,48,37,51],[69,6,37,51,"_useState8"],[69,16,37,51],[69,23,37,51,"_slicedToArray"],[69,37,37,51],[69,38,37,51,"default"],[69,45,37,51],[69,47,37,51,"_useState7"],[69,57,37,51],[70,6,37,9,"isLoading"],[70,15,37,18],[70,18,37,18,"_useState8"],[70,28,37,18],[71,6,37,20,"setIsLoading"],[71,18,37,32],[71,21,37,32,"_useState8"],[71,31,37,32],[72,4,39,2],[72,8,39,8,"login"],[72,13,39,13],[73,6,39,13],[73,10,39,13,"_ref5"],[73,15,39,13],[73,22,39,13,"_asyncToGenerator"],[73,39,39,13],[73,40,39,13,"default"],[73,47,39,13],[73,49,39,16],[73,60,39,23,"email"],[73,65,39,36],[73,67,39,38,"password"],[73,75,39,54],[73,77,39,59],[74,8,40,4],[74,12,40,10,"res"],[74,15,40,13],[74,24,40,22,"api"],[74,33,40,25],[74,34,40,25,"api"],[74,37,40,25],[74,38,40,26,"login"],[74,43,40,31],[74,44,40,32,"email"],[74,49,40,37],[74,51,40,39,"password"],[74,59,40,47],[74,60,40,48],[75,8,41,4],[75,14,41,10],[75,18,41,10,"setToken"],[75,27,41,18],[75,28,41,18,"setToken"],[75,36,41,18],[75,38,41,19,"res"],[75,41,41,22],[75,42,41,23,"token"],[75,47,41,28],[75,48,41,29],[76,8,42,4,"setUser"],[76,15,42,11],[76,16,42,12,"res"],[76,19,42,15],[76,20,42,16,"user"],[76,24,42,20],[76,25,42,21],[77,8,43,4],[78,8,44,4],[78,12,44,8],[79,10,45,6],[79,14,45,12,"me"],[79,16,45,14],[79,25,45,23,"api"],[79,34,45,26],[79,35,45,26,"api"],[79,38,45,26],[79,39,45,27,"getMe"],[79,44,45,32],[79,45,45,33],[79,46,45,34],[80,10,46,6,"setOrganization"],[80,25,46,21],[80,26,46,22,"me"],[80,28,46,24],[80,29,46,25,"organization"],[80,41,46,37],[80,42,46,38],[81,10,47,6,"setOutlets"],[81,20,47,16],[81,21,47,17,"me"],[81,23,47,19],[81,24,47,20,"outlets"],[81,31,47,27],[81,35,47,31],[81,37,47,33],[81,38,47,34],[82,8,48,4],[82,9,48,5],[82,10,48,6],[82,16,48,12],[82,17,48,13],[83,6,49,2],[83,7,49,3],[84,6,49,3],[84,22,39,8,"login"],[84,27,39,13,"login"],[84,28,39,13,"_x"],[84,30,39,13],[84,32,39,13,"_x2"],[84,35,39,13],[85,8,39,13],[85,15,39,13,"_ref5"],[85,20,39,13],[85,21,39,13,"apply"],[85,26,39,13],[85,33,39,13,"arguments"],[85,42,39,13],[86,6,39,13],[87,4,39,13],[87,7,49,3],[88,4,51,2],[88,8,51,8,"logout"],[88,14,51,14],[89,6,51,14],[89,10,51,14,"_ref6"],[89,15,51,14],[89,22,51,14,"_asyncToGenerator"],[89,39,51,14],[89,40,51,14,"default"],[89,47,51,14],[89,49,51,17],[89,62,51,29],[90,8,52,4],[90,14,52,10],[90,18,52,10,"clearToken"],[90,27,52,20],[90,28,52,20,"clearToken"],[90,38,52,20],[90,40,52,21],[90,41,52,22],[91,8,53,4,"setUser"],[91,15,53,11],[91,16,53,12],[91,20,53,16],[91,21,53,17],[92,8,54,4,"setOrganization"],[92,23,54,19],[92,24,54,20],[92,28,54,24],[92,29,54,25],[93,8,55,4,"setOutlets"],[93,18,55,14],[93,19,55,15],[93,21,55,17],[93,22,55,18],[94,6,56,2],[94,7,56,3],[95,6,56,3],[95,22,51,8,"logout"],[95,28,51,14,"logout"],[95,29,51,14],[96,8,51,14],[96,15,51,14,"_ref6"],[96,20,51,14],[96,21,51,14,"apply"],[96,26,51,14],[96,33,51,14,"arguments"],[96,42,51,14],[97,6,51,14],[98,4,51,14],[98,7,56,3],[99,4,58,2],[99,8,58,8,"refresh"],[99,15,58,15],[100,6,58,15],[100,10,58,15,"_ref7"],[100,15,58,15],[100,22,58,15,"_asyncToGenerator"],[100,39,58,15],[100,40,58,15,"default"],[100,47,58,15],[100,49,58,18],[100,62,58,30],[101,8,59,4],[101,12,59,8],[102,10,60,6],[102,14,60,12,"me"],[102,16,60,14],[102,25,60,23,"api"],[102,34,60,26],[102,35,60,26,"api"],[102,38,60,26],[102,39,60,27,"getMe"],[102,44,60,32],[102,45,60,33],[102,46,60,34],[103,10,61,6,"setUser"],[103,17,61,13],[103,18,61,14,"me"],[103,20,61,16],[103,21,61,17,"user"],[103,25,61,21],[103,26,61,22],[104,10,62,6,"setOrganization"],[104,25,62,21],[104,26,62,22,"me"],[104,28,62,24],[104,29,62,25,"organization"],[104,41,62,37],[104,42,62,38],[105,10,63,6,"setOutlets"],[105,20,63,16],[105,21,63,17,"me"],[105,23,63,19],[105,24,63,20,"outlets"],[105,31,63,27],[105,35,63,31],[105,37,63,33],[105,38,63,34],[106,8,64,4],[106,9,64,5],[106,10,64,6],[106,16,64,12],[107,10,65,6],[107,16,65,12,"logout"],[107,22,65,18],[107,23,65,19],[107,24,65,20],[108,8,66,4],[109,6,67,2],[109,7,67,3],[110,6,67,3],[110,22,58,8,"refresh"],[110,29,58,15,"refresh"],[110,30,58,15],[111,8,58,15],[111,15,58,15,"_ref7"],[111,20,58,15],[111,21,58,15,"apply"],[111,26,58,15],[111,33,58,15,"arguments"],[111,42,58,15],[112,6,58,15],[113,4,58,15],[113,7,67,3],[114,4,69,2],[114,24,70,4],[114,28,70,4,"_reactJsxDevRuntime"],[114,47,70,4],[114,48,70,4,"jsxDEV"],[114,54,70,4],[114,56,70,5,"AuthContext"],[114,67,70,16],[114,68,70,17,"Provider"],[114,76,70,25],[115,6,70,26,"value"],[115,11,70,31],[115,13,70,33],[116,8,70,35,"user"],[116,12,70,39],[117,8,70,41,"organization"],[117,20,70,53],[118,8,70,55,"outlets"],[118,15,70,62],[119,8,70,64,"isLoading"],[119,17,70,73],[120,8,70,75,"login"],[120,13,70,80],[121,8,70,82,"logout"],[121,14,70,88],[122,8,70,90,"refresh"],[123,6,70,98],[123,7,70,100],[124,6,70,100,"children"],[124,14,70,100],[124,16,71,7,"children"],[125,4,71,15],[126,6,71,15,"fileName"],[126,14,71,15],[126,16,71,15,"_jsxFileName"],[126,28,71,15],[127,6,71,15,"lineNumber"],[127,16,71,15],[128,6,71,15,"columnNumber"],[128,18,71,15],[129,4,71,15],[129,11,72,26],[129,12,72,27],[130,2,74,0],[131,2,74,1,"_s"],[131,4,74,1],[131,5,33,16,"AuthProvider"],[131,17,33,28],[132,2,33,28,"_c"],[132,4,33,28],[132,7,33,16,"AuthProvider"],[132,19,33,28],[133,2,76,7],[133,6,76,13,"useAuth"],[133,13,76,20],[133,16,76,23,"useAuth"],[133,17,76,23],[134,4,76,23,"_s2"],[134,7,76,23],[135,4,76,23],[135,11,76,29],[135,15,76,29,"useContext"],[135,21,76,39],[135,22,76,39,"useContext"],[135,32,76,39],[135,34,76,40,"AuthContext"],[135,45,76,51],[135,46,76,52],[136,2,76,52],[137,2,76,53,"_s2"],[137,5,76,53],[137,6,76,13,"useAuth"],[137,13,76,20],[138,2,76,20],[138,6,76,20,"_c"],[138,8,76,20],[139,2,76,20,"$RefreshReg$"],[139,14,76,20],[139,15,76,20,"_c"],[139,17,76,20],[140,0,76,20],[140,3]],"functionMap":{"names":["<global>","createContext$argument_0.login","createContext$argument_0.logout","createContext$argument_0.refresh","AuthProvider","login","logout","refresh","useAuth"],"mappings":"AAA;SC2B,cD;UEC,cF;WGC,cH;OIG;gBCM;GDU;iBEE;GFK;kBGE;GHS;CJO;uBQE,6BR"},"hasCjsExports":false},"type":"js/module"}]}