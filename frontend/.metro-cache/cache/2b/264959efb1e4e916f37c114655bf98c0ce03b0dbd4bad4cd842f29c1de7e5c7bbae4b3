{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":57,"index":136}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.AuthProvider = AuthProvider;\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _utilsApi = require(_dependencyMap[1], \"../utils/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    organization: null,\n    outlets: [],\n    isLoading: true,\n    login: async () => {},\n    logout: async () => {},\n    refresh: async () => {}\n  });\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [organization, setOrganization] = (0, _react.useState)(null);\n    const [outlets, setOutlets] = (0, _react.useState)([]);\n    const [isLoading, setIsLoading] = (0, _react.useState)(false);\n    const login = async (email, password) => {\n      const res = await _utilsApi.api.login(email, password);\n      await (0, _utilsApi.setToken)(res.token);\n      setUser(res.user);\n      // Fetch full profile\n      try {\n        const me = await _utilsApi.api.getMe();\n        setOrganization(me.organization);\n        setOutlets(me.outlets || []);\n      } catch {}\n    };\n    const logout = async () => {\n      await (0, _utilsApi.clearToken)();\n      setUser(null);\n      setOrganization(null);\n      setOutlets([]);\n    };\n    const refresh = async () => {\n      try {\n        const me = await _utilsApi.api.getMe();\n        setUser(me.user);\n        setOrganization(me.organization);\n        setOutlets(me.outlets || []);\n      } catch {\n        await logout();\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        organization,\n        outlets,\n        isLoading,\n        login,\n        logout,\n        refresh\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this);\n  }\n  const useAuth = () => (0, _react.useContext)(AuthContext);\n});","lineCount":79,"map":[[8,2,33,0,"exports"],[8,9,33,0],[8,10,33,0,"AuthProvider"],[8,22,33,0],[8,25,33,0,"AuthProvider"],[8,37,33,0],[9,2,76,0,"Object"],[9,8,76,0],[9,9,76,0,"defineProperty"],[9,23,76,0],[9,24,76,0,"exports"],[9,31,76,0],[10,4,76,0,"enumerable"],[10,14,76,0],[11,4,76,0,"get"],[11,7,76,0],[11,18,76,0,"get"],[11,19,76,0],[12,6,76,0],[12,13,76,0,"useAuth"],[12,20,76,0],[13,4,76,0],[14,2,76,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_utilsApi"],[16,15,2,0],[16,18,2,0,"require"],[16,25,2,0],[16,26,2,0,"_dependencyMap"],[16,40,2,0],[17,2,2,57],[17,6,2,57,"_reactJsxDevRuntime"],[17,25,2,57],[17,28,2,57,"require"],[17,35,2,57],[17,36,2,57,"_dependencyMap"],[17,50,2,57],[18,2,23,0],[18,8,23,6,"AuthContext"],[18,19,23,17],[18,35,23,20],[18,39,23,20,"createContext"],[18,45,23,33],[18,46,23,33,"createContext"],[18,59,23,33],[18,61,23,45],[19,4,24,2,"user"],[19,8,24,6],[19,10,24,8],[19,14,24,12],[20,4,25,2,"organization"],[20,16,25,14],[20,18,25,16],[20,22,25,20],[21,4,26,2,"outlets"],[21,11,26,9],[21,13,26,11],[21,15,26,13],[22,4,27,2,"isLoading"],[22,13,27,11],[22,15,27,13],[22,19,27,17],[23,4,28,2,"login"],[23,9,28,7],[23,11,28,9],[23,17,28,9,"login"],[23,18,28,9],[23,23,28,21],[23,24,28,22],[23,25,28,23],[24,4,29,2,"logout"],[24,10,29,8],[24,12,29,10],[24,18,29,10,"logout"],[24,19,29,10],[24,24,29,22],[24,25,29,23],[24,26,29,24],[25,4,30,2,"refresh"],[25,11,30,9],[25,13,30,11],[25,19,30,11,"refresh"],[25,20,30,11],[25,25,30,23],[25,26,30,24],[26,2,31,0],[26,3,31,1],[26,4,31,2],[27,2,33,7],[27,11,33,16,"AuthProvider"],[27,23,33,28,"AuthProvider"],[27,24,33,29],[28,4,33,31,"children"],[29,2,33,71],[29,3,33,72],[29,5,33,74],[30,4,34,2],[30,10,34,8],[30,11,34,9,"user"],[30,15,34,13],[30,17,34,15,"setUser"],[30,24,34,22],[30,25,34,23],[30,28,34,26],[30,32,34,26,"useState"],[30,38,34,34],[30,39,34,34,"useState"],[30,47,34,34],[30,49,34,48],[30,53,34,52],[30,54,34,53],[31,4,35,2],[31,10,35,8],[31,11,35,9,"organization"],[31,23,35,21],[31,25,35,23,"setOrganization"],[31,40,35,38],[31,41,35,39],[31,44,35,42],[31,48,35,42,"useState"],[31,54,35,50],[31,55,35,50,"useState"],[31,63,35,50],[31,65,35,56],[31,69,35,60],[31,70,35,61],[32,4,36,2],[32,10,36,8],[32,11,36,9,"outlets"],[32,18,36,16],[32,20,36,18,"setOutlets"],[32,30,36,28],[32,31,36,29],[32,34,36,32],[32,38,36,32,"useState"],[32,44,36,40],[32,45,36,40,"useState"],[32,53,36,40],[32,55,36,48],[32,57,36,50],[32,58,36,51],[33,4,37,2],[33,10,37,8],[33,11,37,9,"isLoading"],[33,20,37,18],[33,22,37,20,"setIsLoading"],[33,34,37,32],[33,35,37,33],[33,38,37,36],[33,42,37,36,"useState"],[33,48,37,44],[33,49,37,44,"useState"],[33,57,37,44],[33,59,37,45],[33,64,37,50],[33,65,37,51],[34,4,39,2],[34,10,39,8,"login"],[34,15,39,13],[34,18,39,16],[34,24,39,16,"login"],[34,25,39,23,"email"],[34,30,39,36],[34,32,39,38,"password"],[34,40,39,54],[34,45,39,59],[35,6,40,4],[35,12,40,10,"res"],[35,15,40,13],[35,18,40,16],[35,24,40,22,"api"],[35,33,40,25],[35,34,40,25,"api"],[35,37,40,25],[35,38,40,26,"login"],[35,43,40,31],[35,44,40,32,"email"],[35,49,40,37],[35,51,40,39,"password"],[35,59,40,47],[35,60,40,48],[36,6,41,4],[36,12,41,10],[36,16,41,10,"setToken"],[36,25,41,18],[36,26,41,18,"setToken"],[36,34,41,18],[36,36,41,19,"res"],[36,39,41,22],[36,40,41,23,"token"],[36,45,41,28],[36,46,41,29],[37,6,42,4,"setUser"],[37,13,42,11],[37,14,42,12,"res"],[37,17,42,15],[37,18,42,16,"user"],[37,22,42,20],[37,23,42,21],[38,6,43,4],[39,6,44,4],[39,10,44,8],[40,8,45,6],[40,14,45,12,"me"],[40,16,45,14],[40,19,45,17],[40,25,45,23,"api"],[40,34,45,26],[40,35,45,26,"api"],[40,38,45,26],[40,39,45,27,"getMe"],[40,44,45,32],[40,45,45,33],[40,46,45,34],[41,8,46,6,"setOrganization"],[41,23,46,21],[41,24,46,22,"me"],[41,26,46,24],[41,27,46,25,"organization"],[41,39,46,37],[41,40,46,38],[42,8,47,6,"setOutlets"],[42,18,47,16],[42,19,47,17,"me"],[42,21,47,19],[42,22,47,20,"outlets"],[42,29,47,27],[42,33,47,31],[42,35,47,33],[42,36,47,34],[43,6,48,4],[43,7,48,5],[43,8,48,6],[43,14,48,12],[43,15,48,13],[44,4,49,2],[44,5,49,3],[45,4,51,2],[45,10,51,8,"logout"],[45,16,51,14],[45,19,51,17],[45,25,51,17,"logout"],[45,26,51,17],[45,31,51,29],[46,6,52,4],[46,12,52,10],[46,16,52,10,"clearToken"],[46,25,52,20],[46,26,52,20,"clearToken"],[46,36,52,20],[46,38,52,21],[46,39,52,22],[47,6,53,4,"setUser"],[47,13,53,11],[47,14,53,12],[47,18,53,16],[47,19,53,17],[48,6,54,4,"setOrganization"],[48,21,54,19],[48,22,54,20],[48,26,54,24],[48,27,54,25],[49,6,55,4,"setOutlets"],[49,16,55,14],[49,17,55,15],[49,19,55,17],[49,20,55,18],[50,4,56,2],[50,5,56,3],[51,4,58,2],[51,10,58,8,"refresh"],[51,17,58,15],[51,20,58,18],[51,26,58,18,"refresh"],[51,27,58,18],[51,32,58,30],[52,6,59,4],[52,10,59,8],[53,8,60,6],[53,14,60,12,"me"],[53,16,60,14],[53,19,60,17],[53,25,60,23,"api"],[53,34,60,26],[53,35,60,26,"api"],[53,38,60,26],[53,39,60,27,"getMe"],[53,44,60,32],[53,45,60,33],[53,46,60,34],[54,8,61,6,"setUser"],[54,15,61,13],[54,16,61,14,"me"],[54,18,61,16],[54,19,61,17,"user"],[54,23,61,21],[54,24,61,22],[55,8,62,6,"setOrganization"],[55,23,62,21],[55,24,62,22,"me"],[55,26,62,24],[55,27,62,25,"organization"],[55,39,62,37],[55,40,62,38],[56,8,63,6,"setOutlets"],[56,18,63,16],[56,19,63,17,"me"],[56,21,63,19],[56,22,63,20,"outlets"],[56,29,63,27],[56,33,63,31],[56,35,63,33],[56,36,63,34],[57,6,64,4],[57,7,64,5],[57,8,64,6],[57,14,64,12],[58,8,65,6],[58,14,65,12,"logout"],[58,20,65,18],[58,21,65,19],[58,22,65,20],[59,6,66,4],[60,4,67,2],[60,5,67,3],[61,4,69,2],[61,24,70,4],[61,28,70,4,"_reactJsxDevRuntime"],[61,47,70,4],[61,48,70,4,"jsxDEV"],[61,54,70,4],[61,56,70,5,"AuthContext"],[61,67,70,16],[61,68,70,17,"Provider"],[61,76,70,25],[62,6,70,26,"value"],[62,11,70,31],[62,13,70,33],[63,8,70,35,"user"],[63,12,70,39],[64,8,70,41,"organization"],[64,20,70,53],[65,8,70,55,"outlets"],[65,15,70,62],[66,8,70,64,"isLoading"],[66,17,70,73],[67,8,70,75,"login"],[67,13,70,80],[68,8,70,82,"logout"],[68,14,70,88],[69,8,70,90,"refresh"],[70,6,70,98],[70,7,70,100],[71,6,70,100,"children"],[71,14,70,100],[71,16,71,7,"children"],[72,4,71,15],[73,6,71,15,"fileName"],[73,14,71,15],[73,16,71,15,"_jsxFileName"],[73,28,71,15],[74,6,71,15,"lineNumber"],[74,16,71,15],[75,6,71,15,"columnNumber"],[75,18,71,15],[76,4,71,15],[76,11,72,26],[76,12,72,27],[77,2,74,0],[78,2,76,7],[78,8,76,13,"useAuth"],[78,15,76,20],[78,18,76,23,"useAuth"],[78,19,76,23],[78,24,76,29],[78,28,76,29,"useContext"],[78,34,76,39],[78,35,76,39,"useContext"],[78,45,76,39],[78,47,76,40,"AuthContext"],[78,58,76,51],[78,59,76,52],[79,0,76,53],[79,3]],"functionMap":{"names":["<global>","createContext$argument_0.login","createContext$argument_0.logout","createContext$argument_0.refresh","AuthProvider","login","logout","refresh","useAuth"],"mappings":"AAA;SC2B,cD;UEC,cF;WGC,cH;OIG;gBCM;GDU;iBEE;GFK;kBGE;GHS;CJO;uBQE,6BR"},"hasCjsExports":false},"type":"js/module"}]}